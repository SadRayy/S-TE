<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Eğlence Haber Akışı</title>
<style>
body { font-family: Arial; padding: 20px; background:#f0f0f0; }
input { display:block; margin:10px 0; padding:5px; }
button { padding:5px 10px; }
.news { background:white; margin:10px 0; padding:10px; border-radius:5px; }
.title { font-weight:bold; color:darkred; }
</style>
</head>
<body>

<h2>Kayıt Ol</h2>
<input type="text" id="regNick" placeholder="Nickname">
<input type="password" id="regPass" placeholder="Şifre">
<button onclick="registerUser()">Kayıt Ol</button>

<h2>Giriş Yap</h2>
<input type="text" id="loginNick" placeholder="Nickname">
<input type="password" id="loginPass" placeholder="Şifre">
<button onclick="loginUser()">Giriş Yap</button>

<div id="news-container"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
import { getFirestore, collection, doc, setDoc, getDoc, getDocs } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "API_KEY",
  authDomain: "sadrayy-site.firebaseapp.com",
  projectId: "sadrayy-site",
  storageBucket: "sadrayy-site.appspot.com",
  messagingSenderId: "302147777701",
  appId: "1:302147777701:web:d701293a09ab61d85f894c"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Kayıt fonksiyonu
async function registerUser() {
  const nick = document.getElementById("regNick").value;
  const pass = document.getElementById("regPass").value;
  if (!nick || !pass) return alert("Lütfen doldurun!");

  await setDoc(doc(db, "users", nick), { password: pass });
  alert("Kayıt başarılı! Giriş yapabilirsiniz.");
}

// Giriş fonksiyonu
async function loginUser() {
  const nick = document.getElementById("loginNick").value;
  const pass = document.getElementById("loginPass").value;
  if (!nick || !pass) return alert("Lütfen doldurun!");

  const userDoc = await getDoc(doc(db, "users", nick));
  if (!userDoc.exists()) return alert("Kullanıcı bulunamadı!");
  if (userDoc.data().password !== pass) return alert("Şifre yanlış!");

  alert("Giriş başarılı! Eğlence akışına yönlendiriliyorsun.");
  loadNews();
}

// Haberleri yükleme (tüm kullanıcılar aynı içerikleri görecek)
async function loadNews() {
  const querySnapshot = await getDocs(collection(db, "news"));
  const container = document.getElementById("news-container");
  container.innerHTML = "<h2>Eğlence Haberleri</h2>";
  querySnapshot.forEach((doc) => {
    const data = doc.data();
    const div = document.createElement("div");
    div.classList.add("news");
    div.innerHTML = `<div class="title">${data.title}</div><div>${data.content}</div>`;
    container.appendChild(div);
  });
}
</script>

</body>
</html>
